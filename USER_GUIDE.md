# Animation Curves 用户指南

## 目录

1. [简介](#简介)
2. [安装说明](#安装说明)
3. [快速开始](#快速开始)
4. [曲线详解](#曲线详解)
5. [参数说明](#参数说明)
6. [常见问题](#常见问题)
7. [技巧与最佳实践](#技巧与最佳实践)

---

## 简介

**Animation Curves** 是一个 After Effects 脚本插件，将多平台的动画曲线带入 AE 工作流程。支持：

- **Rive**: 1 种弹性曲线
- **Android**: 11 种曲线（基础、物理、Material Design）
- **iOS**: 14 种曲线（UIView.animate、Spring、CAMediaTiming）

**总计 26 种专业动画曲线**，让你的动画与移动端开发保持一致。

---

## 安装说明

### 方法 1: 直接运行（推荐）

1. 下载 `AnimationCurves-v2.jsx` 文件
2. 在 After Effects 中，选择 **文件 > 脚本 > 运行脚本文件...**
3. 选择下载的 `.jsx` 文件
4. 插件窗口将自动打开

### 方法 2: 安装到脚本面板

1. 将 `AnimationCurves-v2.jsx` 复制到以下目录：
   - **Windows**: `C:\Program Files\Adobe\Adobe After Effects [版本]\Support Files\Scripts\ScriptUI Panels\`
   - **macOS**: `/Applications/Adobe After Effects [版本]/Scripts/ScriptUI Panels/`

2. 重启 After Effects

3. 在菜单栏选择 **窗口 > Animation Curves.jsx**

### 系统要求

- After Effects CC 2018 或更高版本
- 支持 Windows 和 macOS

---

## 快速开始

### 基本使用流程

1. **打开插件**
   - 运行脚本或从窗口菜单打开

2. **选择平台标签**
   - 点击顶部的 **Rive** / **Android** / **iOS** 标签

3. **选择曲线类型**
   - 从下拉菜单中选择想要的曲线

4. **调整参数**（如果有）
   - 使用滑块或输入框调整曲线参数
   - 实时预览曲线形状

5. **选择关键帧**
   - 在时间线中选中需要应用曲线的属性关键帧
   - 必须至少选择 2 个关键帧

6. **应用曲线**
   - 点击 **"应用到选中关键帧"** 按钮
   - 曲线表达式将自动添加到属性

### 示例：创建弹性动画

```
1. 创建一个图层，添加位置关键帧（0s 和 1s）
2. 选中这两个关键帧
3. 在插件中选择 Rive > Elastic
4. 设置参数：
   - 振幅 (Amplitude): 1.5
   - 周期 (Period): 0.3
   - 类型: easeOut
5. 点击"应用到选中关键帧"
6. 播放预览，查看弹性效果
```

---

## 曲线详解

### Rive 平台

#### Elastic（弹性曲线）
- **描述**: 模拟弹簧振荡效果
- **参数**:
  - `amplitude` (振幅): 0.1 - 10.0，默认 1.0
  - `period` (周期): 0.1 - 5.0，默认 0.5
  - `easingType`: easeIn | easeOut | easeInOut
- **适用场景**: 按钮点击、弹窗出现、强调动画

---

### Android 平台

#### 基础曲线

##### Linear（线性）
- **描述**: 匀速运动，无加速度
- **参数**: 无
- **适用场景**: 简单的位移、颜色渐变

##### Accelerate（加速）
- **描述**: 从静止开始加速
- **参数**: `factor` (因子) 0.1 - 3.0，默认 1.0
- **适用场景**: 物体下落、快速退出动画

##### Decelerate（减速）
- **描述**: 快速开始，逐渐减速
- **参数**: `factor` (因子) 0.1 - 3.0，默认 1.0
- **适用场景**: 物体停靠、滑动停止

##### AccelerateDecelerate（加速减速）
- **描述**: 先加速后减速，平滑过渡
- **参数**: 无
- **适用场景**: 自然的移动动画、页面切换

#### 物理曲线

##### Anticipate（预期）
- **描述**: 先向后退一点，再向前运动
- **参数**: `tension` (张力) 0.0 - 5.0，默认 2.0
- **适用场景**: 投掷动作、蓄力效果

##### Overshoot（超调）
- **描述**: 超过目标位置后回弹
- **参数**: `tension` (张力) 0.0 - 5.0，默认 2.0
- **适用场景**: 弹性停靠、强调终点

##### AnticipateOvershoot（预期超调）
- **描述**: 结合 Anticipate 和 Overshoot
- **参数**: `tension` (张力) 0.0 - 5.0，默认 2.0
- **适用场景**: 夸张的动画效果

##### Bounce（弹跳）
- **描述**: 模拟物体落地弹跳
- **参数**: 无
- **适用场景**: 掉落动画、强调落地

#### Material Design 曲线

##### FastOutSlowIn（快出慢入）
- **描述**: Material Design 标准曲线，快速开始，缓慢结束
- **参数**: 无（贝塞尔: 0.4, 0.0, 0.2, 1.0）
- **适用场景**: 大多数 UI 动画、推荐作为默认曲线

##### FastOutLinearIn（快出线性入）
- **描述**: 快速开始，线性结束
- **参数**: 无（贝塞尔: 0.4, 0.0, 1.0, 1.0）
- **适用场景**: 元素退出屏幕

##### LinearOutSlowIn（线性出慢入）
- **描述**: 线性开始，缓慢结束
- **参数**: 无（贝塞尔: 0.0, 0.0, 0.2, 1.0）
- **适用场景**: 元素进入屏幕

---

### iOS 平台

#### UIView.animate 标准曲线

##### Linear（线性）
- **描述**: 匀速运动
- **参数**: 无
- **适用场景**: 简单动画

##### EaseIn（缓入）
- **描述**: 慢速开始，加速结束
- **参数**: 无
- **适用场景**: 元素进入

##### EaseOut（缓出）
- **描述**: 快速开始，减速结束
- **参数**: 无
- **适用场景**: 元素退出

##### EaseInOut（缓入缓出）
- **描述**: 慢速开始和结束，中间加速
- **参数**: 无
- **适用场景**: 平滑过渡

#### UIView.animate Spring（弹簧动画）

##### Spring Default（默认弹簧）
- **描述**: iOS 标准弹簧效果
- **参数**: 无（内部: damping=0.7, velocity=0.0）
- **适用场景**: 通用弹性动画

##### Spring Gentle（温和弹簧）
- **描述**: 更柔和的弹簧效果
- **参数**: 无（内部: damping=0.9, velocity=0.0）
- **适用场景**: 细腻的 UI 动画

##### Spring Bouncy（弹跳弹簧）
- **描述**: 更强的弹跳效果
- **参数**: 无（内部: damping=0.5, velocity=1.0）
- **适用场景**: 强调动画、游戏效果

##### Spring Custom（自定义弹簧）
- **描述**: 完全自定义的弹簧参数
- **参数**:
  - `damping` (阻尼): 0.1 - 1.0，默认 0.7
  - `velocity` (初速度): 0.0 - 3.0，默认 0.0
  - `duration` (持续时间): 0.1 - 2.0，默认 0.5
- **适用场景**: 需要精确控制的弹簧动画

#### CAMediaTimingFunction（核心动画时间函数）

##### Default（默认）
- **描述**: iOS 核心动画默认曲线
- **参数**: 无（贝塞尔: 0.25, 0.1, 0.25, 1.0）

##### EaseIn（缓入）
- **参数**: 无（贝塞尔: 0.42, 0.0, 1.0, 1.0）

##### EaseOut（缓出）
- **参数**: 无（贝塞尔: 0.0, 0.0, 0.58, 1.0）

##### EaseInEaseOut（缓入缓出）
- **参数**: 无（贝塞尔: 0.42, 0.0, 0.58, 1.0）

##### Linear（线性）
- **参数**: 无（贝塞尔: 0.0, 0.0, 1.0, 1.0）

---

## 参数说明

### 参数类型详解

| 参数名 | 范围 | 默认值 | 说明 |
|--------|------|--------|------|
| **amplitude** (振幅) | 0.1 - 10.0 | 1.0 | 控制弹性曲线的振荡幅度，值越大振荡越明显 |
| **period** (周期) | 0.1 - 5.0 | 0.5 | 控制弹性曲线的振荡频率，值越小振荡越快 |
| **factor** (因子) | 0.1 - 3.0 | 1.0 | 控制加速/减速的强度，值越大变化越剧烈 |
| **tension** (张力) | 0.0 - 5.0 | 2.0 | 控制预期/超调的强度，值越大效果越明显 |
| **damping** (阻尼) | 0.1 - 1.0 | 0.7 | 控制弹簧的阻尼，值越小弹跳越多 |
| **velocity** (初速度) | 0.0 - 3.0 | 0.0 | 控制弹簧的初始速度，影响弹跳强度 |
| **duration** (持续时间) | 0.1 - 2.0 | 0.5 | 控制弹簧动画的时长 |

### 参数调整技巧

1. **小幅调整**: 参数变化对曲线影响较大，建议每次调整 0.1 - 0.2
2. **实时预览**: 调整参数时观察预览窗口的曲线变化
3. **保存预设**: 找到满意的参数组合后，记录下来以便复用

---

## 常见问题

### Q1: 为什么点击"应用"按钮没有反应？

**A**: 请检查以下几点：
- 是否在时间线中选中了至少 2 个关键帧
- 选中的是否是支持的属性（位置、缩放、旋转、不透明度等）
- 关键帧是否在同一个属性上

### Q2: 应用曲线后，动画看起来不对？

**A**: 可能的原因：
- 参数设置过于极端，尝试使用默认值
- 关键帧时间间隔太短，曲线效果不明显
- 某些曲线（如 Bounce、Elastic）需要足够的时间才能展现效果

### Q3: 可以同时应用多个曲线吗？

**A**: 不建议。每次应用会覆盖之前的表达式。如果需要组合效果，建议：
- 对不同属性应用不同曲线
- 或者手动编辑表达式代码

### Q4: 曲线表达式会影响 AE 性能吗？

**A**: 影响很小。表达式经过优化，对大多数项目性能影响可忽略。如果遇到性能问题：
- 减少同时使用曲线的图层数量
- 预渲染复杂的动画
- 使用简单曲线（如 Linear、EaseIn）代替复杂曲线

### Q5: 如何删除已应用的曲线？

**A**:
1. 选中应用了曲线的属性
2. 右键点击属性名
3. 选择"删除表达式"

### Q6: 支持哪些 AE 版本？

**A**: 支持 After Effects CC 2018 及以上版本。旧版本可能存在兼容性问题。

### Q7: 曲线预览窗口显示不正确？

**A**:
- 尝试切换到其他标签页再切换回来
- 调整参数触发重绘
- 重启插件

### Q8: 可以在表达式中修改参数吗？

**A**: 可以。应用曲线后，表达式会添加到属性中。你可以：
1. 按住 Alt/Option 点击属性的秒表图标
2. 在表达式编辑器中修改参数值
3. 参数通常在表达式开头定义

---

## 技巧与最佳实践

### 1. 选择合适的曲线

| 动画类型 | 推荐曲线 |
|----------|----------|
| 按钮点击 | Elastic (easeOut), Overshoot |
| 页面切换 | FastOutSlowIn, EaseInOut |
| 元素进入 | LinearOutSlowIn, EaseOut |
| 元素退出 | FastOutLinearIn, EaseIn |
| 强调动画 | Bounce, Spring Bouncy |
| 自然移动 | AccelerateDecelerate, Spring Default |

### 2. 参数推荐值

**Elastic 曲线**:
- 轻微弹性: amplitude=1.0, period=0.3
- 中等弹性: amplitude=1.5, period=0.5
- 强烈弹性: amplitude=2.5, period=0.8

**Anticipate/Overshoot**:
- 轻微效果: tension=1.0
- 标准效果: tension=2.0
- 夸张效果: tension=4.0

**Spring Custom**:
- 快速响应: damping=0.8, velocity=0.5
- 柔和弹跳: damping=0.6, velocity=0.0
- 强烈弹跳: damping=0.4, velocity=1.5

### 3. 工作流程优化

1. **创建预设合成**: 为常用曲线创建示例合成，方便对比选择
2. **批量应用**: 选中多个属性的关键帧，一次性应用相同曲线
3. **分层动画**: 对不同属性应用不同曲线，创造更丰富的效果
4. **时间偏移**: 配合关键帧助手的"序列图层"功能，创建连续动画

### 4. 与移动端开发协作

如果你在为移动应用制作动画原型：

- **Android 项目**: 使用 Android 标签页的曲线，与开发保持一致
- **iOS 项目**: 使用 iOS 标签页的曲线
- **跨平台项目**: 使用 Material Design 曲线（FastOutSlowIn 等），两端都支持

### 5. 调试技巧

- 使用 **Graph Editor**（图表编辑器）查看曲线形状
- 创建简单的测试合成，单独测试每条曲线
- 使用 **运动模糊** 增强动画真实感
- 配合 **缓入缓出** 手柄微调曲线

---

## 更新日志

### v2.0.0 (当前版本)
- ✨ 新增 Android 11 种曲线
- ✨ 新增 iOS 14 种曲线
- ✨ 三标签页 UI 设计
- ✨ 实时曲线预览
- ✨ 动态参数面板
- 🐛 修复表达式兼容性问题

### v1.1.0
- ✨ 初始版本，支持 Rive Elastic 曲线

---

## 技术支持

- **问题反馈**: [GitHub Issues](https://github.com/your-repo/issues)
- **功能建议**: 欢迎提交 Feature Request
- **文档**: 查看 `EXAMPLES.md` 了解更多使用案例

---

## 许可证

MIT License

---

**祝你创作愉快！** 🎬✨